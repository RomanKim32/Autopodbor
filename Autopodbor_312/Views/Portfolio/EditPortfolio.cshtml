@model Autopodbor_312.ViewModel.PortfolioDetailsViewModel

@{
	ViewData["Title"] = "Изменение портфолио";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Изменить портфолио</h1>
<hr />
<div class="row">
	<div class="col-md-4">
		<form asp-action="EditPortfolio">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<input type="hidden" asp-for="@Model.Portfolio.Id" />
			<input type="hidden" asp-for="@Model.Portfolio.MainImagePath" />
			<input type="hidden" asp-for="@Model.Portfolio.Publicate" />
			<div class="form-group">
				<label asp-for="@Model.Portfolio.NameRu" class="control-label">Название портфолио на русском</label>
				<input asp-for="@Model.Portfolio.NameRu" class="form-control" required="required" />
				<span asp-validation-for="@Model.Portfolio.NameRu" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.Portfolio.BodyRu" class="control-label">Описание портфолио на русском</label>
				<textarea asp-for="@Model.Portfolio.BodyRu" class="form-control" required="required"></textarea>
				<span asp-validation-for="@Model.Portfolio.BodyRu" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.Portfolio.NameKy" class="control-label">Название портфолио на кыргызском</label>
				<input asp-for="@Model.Portfolio.NameKy" class="form-control" required="required" />
				<span asp-validation-for="@Model.Portfolio.NameKy" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.Portfolio.BodyKy" class="control-label">Описание портфолио на кыргызском</label>
				<textarea asp-for="@Model.Portfolio.BodyKy" class="form-control" required="required"></textarea>
				<span asp-validation-for="@Model.Portfolio.BodyKy" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.Portfolio.CarsBodyTypes.BodyType" class="control-label">Текущий кузов: @Model.Portfolio.CarsBodyTypes.BodyType</label>
				<select asp-for="@Model.Portfolio.CarsBodyTypesId" class="form-control" asp-items="ViewBag.BodyTypes"></select>
				<span asp-validation-for="@Model.Portfolio.CarsBodyTypes.BodyType" class="text-danger"></span>
			</div>
			<div class="form-group">
				<label asp-for="@Model.Portfolio.CarsBrands.Brand" class="control-label">Текущий бренд: @Model.Portfolio.CarsBrands.Brand</label>
				<select asp-for="@Model.Portfolio.CarsBrandsId" class="form-control" asp-items="ViewBag.Brands"></select>
				<span asp-validation-for="@Model.Portfolio.CarsBrands.Brand" class="text-danger"></span>
			</div>
			<div class="form-group">
				@if (Model.Portfolio.CarsBrandsModelId == null)
				{
					<label class="control-label">Модель не выбрана</label>
					<select asp-for="@Model.Portfolio.CarsBrandsModelId" class="form-control" asp-items="ViewBag.Models"></select>

				}
				else
				{
					<label asp-for="@Model.Portfolio.CarsBrandsModel.Model" class="control-label">Текущая модель: @Model.Portfolio.CarsBrandsModel.Model</label>
					<select asp-for="@Model.Portfolio.CarsBrandsModelId" class="form-control" asp-items="ViewBag.Models"></select>
					<span asp-validation-for="@Model.Portfolio.CarsBrandsModel.Model" class="text-danger"></span>
				}

			</div>

			<div class="form-group">
				<label asp-for="Portfolio.IsFieldInspection" class="control-label">Выездной осмотр?</label>
				@if (Model.Portfolio.IsFieldInspection == true)
				{
					<input type="checkbox" checked="yes" asp-for="Portfolio.IsFieldInspection" />
				}
				else
				{
					<input type="checkbox" asp-for="Portfolio.IsFieldInspection" />
				}
			</div>


			<div class="form-group">
				<button type="submit" class="btn btn-primary">Изменить</button>
			</div>
		</form>
	</div>
</div>

<div class="container">
	<div class="row">
		<div>
			<h5 class="mt-3 mb-3">Фото на главной странице </h5>
			<form method="post" enctype="multipart/form-data">
				<input type="hidden" name="id" value="@Model.MainPic.Id" />
				<img width="100" height="100" src="@Model.MainPic.Path" />
				<br />
				<input type="file" name="newPhoto" required="required" />
				<button asp-action="EditMainPhoto" asp-controller="Portfolio" type="submit" class="btn btn-primary">Изменить</button>
			</form>
		</div>

		<h4 class="mt-3 mb-3">Фото на детальной странице</h4>
		@foreach (var item in Model.MinorPictures)
		{
			<div class="col-3">
				<form method="post" asp-action="EditMinorPhoto" asp-controller="Portfolio" enctype="multipart/form-data">
					<input type="hidden" name="id" value="@item.Id" />
					<img width="100" height="100" src="@item.Path" />
					<br />
					<input type="file" name="newPhoto" required="required" />
					<button type="submit" class="btn btn-primary">Изменить</button>
				</form>
				<form method="post">
					<input type="submit" asp-action="DeletePhotoOrVideo" asp-controller="Portfolio" asp-route-id="@item.Id" class="btn btn-primary" value="Удалить фото" />
				</form>
			</div>
		}
		<form class="mt-3 mb-3" method="post" enctype="multipart/form-data">
			<h6>Добавить новое фото для детальной страницы</h6>
			<input type="file" name="newPhoto" required="required" />
			<button type="submit" asp-action="AddMinorPhoto" asp-controller="Portfolio" asp-route-id="@Model.Portfolio.Id" class="btn btn-primary">Добавить фото</button>
		</form>
	</div>
	<div class="row">
		<h4 class="mt-3 mb-3">Видео</h4>
		@foreach (var item in Model.Videos)
		{
			<div class="col-2">
				<form asp-action="EditVideo" asp-controller="Portfolio" method="post" enctype="multipart/form-data">
					<input type="hidden" name="id" value="@item.Id" />
					<iframe width="150" height="100" src=@item.Path title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
					<br />
					<input type="text" name="newVideoId" placeholder="Введите id ролика" required="required" />
					<button type="submit" class="btn btn-primary">Изменить</button>
				</form>
				<form method="post">
					<input type="submit" asp-action="DeletePhotoOrVideo" asp-controller="Portfolio" asp-route-id="@item.Id" class="btn btn-primary" value="Удалить видео" />
				</form>
			</div>
		}
		<form class="mt-3 mb-3" method="post" enctype="multipart/form-data">
			<h6>Добавить видео</h6>
			<input type="text" name="videoId" placeholder="Введите id ролика" required="required" />
			<button type="submit" asp-action="AddVideo" asp-controller="Portfolio" asp-route-id="@Model.Portfolio.Id" class="btn btn-primary">Добавить видео</button>
		</form>
	</div>
</div>

